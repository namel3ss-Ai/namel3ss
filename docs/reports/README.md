# Audit And Baseline Reports

This folder contains deterministic repository audit artifacts used by local verification and CI.

## Outputs

- `code_audit.md`
  - Generated by `scripts/audit_codebase.py`.
  - Enumerates key modules with contract fields:
    - `name` (string)
    - `path` (string)
    - `description` (string)
    - `layer` (`compiler`, `runtime`, `UI`, `test`)
    - `lines_of_code` (integer)

- `baseline_metrics.json`
  - Generated by `scripts/measure_baseline.py`.
  - Captures:
    - `compile_time_ms`
    - `average_runtime_latency_ms`
    - `memory_usage_kb`
    - `measured_at`

## Determinism Rules

- File traversal is sorted and sequential.
- Scripts do not spawn concurrent workers.
- `--timing deterministic` emits stable timing values suitable for CI checks.
- `--timing real` is non-gating and environment-dependent.

## Local Usage

Generate reports:

```bash
python3 scripts/audit_codebase.py
python3 scripts/measure_baseline.py --timing deterministic
# or run both
./scripts/refresh_foundation_reports.sh
```

Validate committed reports without rewriting files:

```bash
python3 scripts/audit_codebase.py --check
python3 scripts/measure_baseline.py --check --timing deterministic
```

## CI Integration

The CI workflow runs both scripts in `--check` mode. If report generation drifts from committed outputs, the job fails.

## Failure Behavior

- Missing required directories or unreadable files fail the audit script with a non-zero exit code.
- Missing sample app or failed compile/runtime measurement fails the metrics script with a non-zero exit code.
- CI treats either failure as a failed job.

## Deployment Considerations

- Scripts are tooling-only and do not modify grammar, compiler semantics, runtime behavior, or UI contracts.
- No external dependencies are added.
- Reports are safe to regenerate and commit as part of normal development workflows.
