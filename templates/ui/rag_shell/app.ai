spec is "1.0"

capabilities:
  ui_rag
  ui_theme
  ui_layout
  ui.custom_layouts
  ui.rag_patterns
  ui.i18n
  ui.plugins

ui:
  theme is "modern"
  primary_color is "#2563EB"
  spacing_scale is 1.0
  border_radius is 10

flow "answer_question":
  return "ok"

flow "ingest_latest":
  return "ok"

flow "open_sources":
  return "ok"

page "RAG Shell":
  title is "RAG Shell"

  sidebar_layout:
    sidebar:
      section "Documents":
        list from state.documents:
          item:
            primary is name
        button "Run ingestion":
          calls flow "ingest_latest"

    main:
      section "Conversation":
        chat:
          messages from is state.chat.messages
          citations from is state.chat.citations
          composer calls flow "answer_question"

      drawer title is "Sources" when is state.ui.show_drawer:
        source_preview from state.ui.preview_source
        list from state.chat.citations:
          item:
            primary is title

  sticky bottom:
    row:
      button "Open Sources":
        calls flow "open_sources"
      text is "Ready"
