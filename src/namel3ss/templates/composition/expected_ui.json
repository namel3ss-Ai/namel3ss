{
  "pages": [
    {
      "name": "composition",
      "slug": "composition",
      "elements": [
        {
          "type": "title",
          "value": "Composition Workspace",
          "element_id": "page.composition.title.0",
          "page": "composition",
          "page_slug": "composition",
          "index": 0,
          "line": 147,
          "column": 3
        },
        {
          "type": "text",
          "value": "Run deterministic pipelines and merges with explicit boundaries.",
          "element_id": "page.composition.text.1",
          "page": "composition",
          "page_slug": "composition",
          "index": 1,
          "line": 148,
          "column": 3
        },
        {
          "type": "section",
          "label": "Composition boundaries",
          "children": [
            {
              "type": "compose",
              "name": "boundaries",
              "slug": "boundaries",
              "children": [
                {
                  "type": "text",
                  "value": "Pure flow: normalize_query.",
                  "element_id": "page.composition.text.2.0.0",
                  "page": "composition",
                  "page_slug": "composition",
                  "index": 0,
                  "line": 152,
                  "column": 7
                },
                {
                  "type": "text",
                  "value": "Effectful flows: ingest_upload, retrieve_primary, retrieve_secondary.",
                  "element_id": "page.composition.text.2.0.1",
                  "page": "composition",
                  "page_slug": "composition",
                  "index": 1,
                  "line": 153,
                  "column": 7
                },
                {
                  "type": "text",
                  "value": "Orchestration: run_retrieval merges branches with a prefer policy.",
                  "element_id": "page.composition.text.2.0.2",
                  "page": "composition",
                  "page_slug": "composition",
                  "index": 2,
                  "line": 154,
                  "column": 7
                }
              ],
              "element_id": "page.composition.compose.2.0",
              "page": "composition",
              "page_slug": "composition",
              "index": 0,
              "line": 151,
              "column": 5,
              "spacing": {
                "padding": "m",
                "gap": "m"
              }
            }
          ],
          "element_id": "page.composition.section.2",
          "page": "composition",
          "page_slug": "composition",
          "index": 2,
          "line": 150,
          "column": 3,
          "spacing": {
            "padding": "m",
            "gap": "l",
            "title_gap": "s"
          }
        },
        {
          "type": "section",
          "label": "Ingestion",
          "children": [
            {
              "type": "text",
              "value": "Upload a file, then run ingestion.",
              "element_id": "page.composition.text.3.0",
              "page": "composition",
              "page_slug": "composition",
              "index": 0,
              "line": 157,
              "column": 5
            },
            {
              "type": "upload",
              "name": "intake",
              "accept": [],
              "multiple": false,
              "required": false,
              "label": "Upload",
              "preview": false,
              "files": [],
              "id": "page.composition.upload.intake",
              "action_id": "page.composition.upload.intake",
              "clear_action_id": "page.composition.upload.intake.clear",
              "element_id": "page.composition.upload.3.1",
              "page": "composition",
              "page_slug": "composition",
              "index": 1,
              "line": 158,
              "column": 5,
              "accessibility": {
                "role": "button",
                "label": "Upload",
                "tab_order": 1
              }
            },
            {
              "type": "button",
              "label": "Run ingestion",
              "id": "page.composition.button.run_ingestion",
              "action_id": "page.composition.button.run_ingestion",
              "action": {
                "type": "call_flow",
                "flow": "run_ingestion"
              },
              "element_id": "page.composition.button_item.3.2",
              "page": "composition",
              "page_slug": "composition",
              "index": 2,
              "line": 159,
              "column": 5,
              "accessibility": {
                "role": "button",
                "label": "Run ingestion",
                "tab_order": 2
              }
            },
            {
              "type": "table",
              "id": "page.composition.table.ingestionreport",
              "record": "IngestionReport",
              "columns": [
                {
                  "name": "upload_id",
                  "type": "text",
                  "label": "Upload ID"
                }
              ],
              "rows": [],
              "element_id": "page.composition.table.3.3",
              "page": "composition",
              "page_slug": "composition",
              "index": 3,
              "line": 161,
              "column": 5,
              "columns_configured": true,
              "pagination": {
                "page_size": 5
              },
              "spacing": {
                "header_gap": "m",
                "row_gap": "s",
                "cell_gap": "s",
                "row_actions_gap": "s"
              },
              "accessibility": {
                "role": "table",
                "label": "Ingestion Report"
              }
            }
          ],
          "element_id": "page.composition.section.3",
          "page": "composition",
          "page_slug": "composition",
          "index": 3,
          "line": 156,
          "column": 3,
          "spacing": {
            "padding": "m",
            "gap": "l",
            "title_gap": "s"
          }
        },
        {
          "type": "section",
          "label": "Retrieval",
          "children": [
            {
              "type": "text",
              "value": "Submit a query, then run retrieval.",
              "element_id": "page.composition.text.4.0",
              "page": "composition",
              "page_slug": "composition",
              "index": 0,
              "line": 168,
              "column": 5
            },
            {
              "type": "chat",
              "children": [
                {
                  "type": "composer",
                  "flow": "run_retrieval",
                  "action_type": "call_flow",
                  "id": "page.composition.composer.4.1.0.composer",
                  "action_id": "page.composition.composer.4.1.0.composer",
                  "action": {
                    "type": "call_flow",
                    "flow": "run_retrieval"
                  },
                  "element_id": "page.composition.composer.4.1.0",
                  "page": "composition",
                  "page_slug": "composition",
                  "index": 0,
                  "line": 170,
                  "column": 7,
                  "spacing": {
                    "input_gap": "s",
                    "action_gap": "s"
                  },
                  "accessibility": {
                    "role": "textbox",
                    "label": "run_retrieval",
                    "tab_order": 3
                  }
                }
              ],
              "element_id": "page.composition.chat.4.1",
              "page": "composition",
              "page_slug": "composition",
              "index": 1,
              "line": 169,
              "column": 5,
              "style": "bubbles",
              "show_avatars": false,
              "group_messages": true,
              "streaming": false,
              "attachments": false,
              "citations_enhanced": false,
              "actions": [],
              "spacing": {
                "section_gap": "m",
                "message_gap": "m",
                "composer_gap": "m"
              }
            },
            {
              "type": "table",
              "id": "page.composition.table.retrievalreport",
              "record": "RetrievalReport",
              "columns": [
                {
                  "name": "query",
                  "type": "text",
                  "label": "Query"
                }
              ],
              "rows": [],
              "element_id": "page.composition.table.4.2",
              "page": "composition",
              "page_slug": "composition",
              "index": 2,
              "line": 171,
              "column": 5,
              "columns_configured": true,
              "pagination": {
                "page_size": 5
              },
              "spacing": {
                "header_gap": "m",
                "row_gap": "s",
                "cell_gap": "s",
                "row_actions_gap": "s"
              },
              "accessibility": {
                "role": "table",
                "label": "Retrieval Report"
              }
            }
          ],
          "element_id": "page.composition.section.4",
          "page": "composition",
          "page_slug": "composition",
          "index": 4,
          "line": 167,
          "column": 3,
          "spacing": {
            "padding": "m",
            "gap": "l",
            "title_gap": "s"
          }
        }
      ],
      "purpose": "Compose ingestion, retrieval, and orchestration with explicit contracts."
    }
  ],
  "actions": {
    "app.ingestion.review": {
      "id": "app.ingestion.review",
      "type": "ingestion_review",
      "debug_only": true
    },
    "app.ingestion.skip": {
      "id": "app.ingestion.skip",
      "type": "ingestion_skip",
      "debug_only": true
    },
    "app.retrieval": {
      "id": "app.retrieval",
      "type": "retrieval_run",
      "debug_only": true
    },
    "app.upload.replace": {
      "id": "app.upload.replace",
      "type": "upload_replace",
      "debug_only": true
    },
    "page.composition.button.run_ingestion": {
      "id": "page.composition.button.run_ingestion",
      "type": "call_flow",
      "flow": "run_ingestion"
    },
    "page.composition.composer.4.1.0.composer": {
      "id": "page.composition.composer.4.1.0.composer",
      "type": "call_flow",
      "flow": "run_retrieval"
    },
    "page.composition.upload.intake": {
      "id": "page.composition.upload.intake",
      "type": "upload_select",
      "name": "intake",
      "multiple": false,
      "required": false
    },
    "page.composition.upload.intake.clear": {
      "id": "page.composition.upload.intake.clear",
      "type": "upload_clear",
      "name": "intake"
    },
    "page.composition.upload.intake.ingestion": {
      "id": "page.composition.upload.intake.ingestion",
      "type": "ingestion_run"
    }
  },
  "diagnostics_enabled": true,
  "theme": {
    "schema_version": "1",
    "setting": "light",
    "current": "light",
    "persisted_current": null,
    "effective": "light",
    "source": "app",
    "runtime_supported": false,
    "theme_name": "default",
    "base_theme": "default",
    "themes_available": [
      "default",
      "dark",
      "high_contrast"
    ],
    "tokens": {
      "background_color": "#FFFFFF",
      "border_radius": 10,
      "font_family": "Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif",
      "font_size_base": 14,
      "font_weight": 500,
      "foreground_color": "#111827",
      "primary_color": "#2563EB",
      "secondary_color": "#5856D6",
      "shadow_level": 1,
      "spacing_scale": 1.0
    },
    "runtime_tokens": {},
    "css": ":root {\n  --n3-primary-color: #2563EB;\n  --n3-secondary-color: #5856D6;\n  --n3-background-color: #FFFFFF;\n  --n3-foreground-color: #111827;\n  --n3-font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;\n  --n3-font-size-base: 14px;\n  --n3-font-weight: 500;\n  --n3-spacing-scale: 1.0;\n  --n3-border-radius: 10px;\n  --n3-shadow-elevation: 0 2px 6px rgba(15, 23, 42, 0.08);\n}\n\nbody.n3-runtime,\nbody {\n  background: var(--n3-background-color);\n  color: var(--n3-foreground-color);\n  font-family: var(--n3-font-family);\n  font-size: var(--n3-font-size-base);\n  font-weight: var(--n3-font-weight);\n}\n\n.ui-body,\n.panel,\n.ui-element,\n.list-item,\n.trace-row,\n.n3-layout-header,\n.n3-layout-sidebar,\n.n3-layout-main,\n.n3-layout-drawer,\n.n3-layout-footer {\n  background: var(--n3-background-color);\n  color: var(--n3-foreground-color);\n  border-radius: var(--n3-border-radius);\n  box-shadow: var(--n3-shadow-elevation);\n}\n\n.btn.primary,\n.ui-chat-action,\n.ui-upload-label {\n  background: var(--n3-primary-color);\n  border-color: var(--n3-primary-color);\n  color: #FFFFFF;\n}\n\n.ui-link,\n.n3-chat-attachment-link,\n.n3-citation-chip {\n  color: var(--n3-primary-color);\n}\n\n.ui-card-title,\n.ui-section-title,\n.n3-chat-group-label {\n  color: var(--n3-secondary-color);\n}\n\n.ui-element,\n.panel,\n.n3-layout-header,\n.n3-layout-sidebar,\n.n3-layout-main,\n.n3-layout-drawer,\n.n3-layout-footer {\n  padding: calc(10px * var(--n3-spacing-scale));\n}\n\n.ui-row,\n.ui-column,\n.ui-card-group,\n.n3-layout-root,\n.n3-layout-body {\n  gap: calc(10px * var(--n3-spacing-scale));\n}\n",
    "css_hash": "af84b4058b81de1bba97dd498d5b53bb92defe1f5de89914b9ee0633692c1446",
    "preference": {
      "allow_override": false,
      "persist": "none"
    },
    "config": {
      "base_theme": "default",
      "overrides": {}
    },
    "token_schema": {
      "primary_color": {
        "type": "color",
        "category": "color",
        "description": "Primary accent used for primary actions and links."
      },
      "secondary_color": {
        "type": "color",
        "category": "color",
        "description": "Secondary accent for supporting emphasis."
      },
      "background_color": {
        "type": "color",
        "category": "color",
        "description": "Application background color."
      },
      "foreground_color": {
        "type": "color",
        "category": "color",
        "description": "Primary text color."
      },
      "font_family": {
        "type": "string",
        "category": "typography",
        "description": "Font family stack."
      },
      "font_size_base": {
        "type": "number",
        "category": "typography",
        "description": "Base font size in pixels."
      },
      "font_weight": {
        "type": "number",
        "category": "typography",
        "description": "Default text weight."
      },
      "spacing_scale": {
        "type": "number",
        "category": "spacing",
        "description": "Global spacing multiplier."
      },
      "border_radius": {
        "type": "number",
        "category": "radius",
        "description": "Default corner radius in pixels."
      },
      "shadow_level": {
        "type": "number",
        "category": "elevation",
        "description": "Shadow intensity level from 0 to 3."
      }
    },
    "font_url": "https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
  },
  "ui": {
    "persistence": {
      "enabled": false,
      "kind": "memory",
      "path": null,
      "schema_version": null
    },
    "settings": {
      "theme": "light",
      "accent_color": "blue",
      "density": "comfortable",
      "motion": "subtle",
      "shape": "rounded",
      "surface": "flat"
    }
  },
  "i18n": {
    "enabled": true,
    "locale": "en",
    "fallback_locale": "en",
    "available_locales": [
      "en"
    ],
    "direction": "ltr",
    "rtl": false
  },
  "upload_requests": [
    {
      "name": "intake",
      "accept": [],
      "multiple": false,
      "required": false,
      "label": "Upload",
      "preview": false
    }
  ],
  "mode": "studio",
  "warnings": [
    {
      "code": "visibility.missing_empty_state_guard",
      "message": "Table on page \"composition\" may render empty-state copy without a visible guard.",
      "fix": "Add `visible when state.<path> > 0` or set `empty_state: hidden`.",
      "path": "page.composition.table.3.3",
      "line": 161,
      "column": 5,
      "category": "visibility",
      "enforced_at": null
    },
    {
      "code": "visibility.missing_empty_state_guard",
      "message": "Table on page \"composition\" may render empty-state copy without a visible guard.",
      "fix": "Add `visible when state.<path> > 0` or set `empty_state: hidden`.",
      "path": "page.composition.table.4.2",
      "line": 171,
      "column": 5,
      "category": "visibility",
      "enforced_at": null
    }
  ]
}
