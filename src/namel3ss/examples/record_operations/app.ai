spec is "1.0"

record "Task":
  fields:
    id is number must be present
    title is text must be present
    done is boolean

flow "apply_changes" requires true:
  set state.task with:
    id is 1
    title is "Draft"
    done is false
  create "Task" with state.task as created
  set state.task with:
    id is 2
    title is "Review"
    done is false
  create "Task" with state.task as created
  update "Task" where id is 1 set:
    done is true
  delete "Task" where id is 2
  find "Task" where true
  return task_results

page "home":
  purpose is "Single-flow example that creates, updates, reads, and deletes records."
  title is "Record Operations"
  card "Run":
    text is "Run the flow to apply record changes."
    button "Apply changes":
      calls flow "apply_changes"
  card "Tasks":
    table is "Task"
