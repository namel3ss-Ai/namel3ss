{
  "type": "Program",
  "line": null,
  "column": null,
  "spec_version": "1.0",
  "app_theme": "light",
  "app_theme_line": null,
  "app_theme_column": null,
  "theme_tokens": {},
  "theme_preference": {
    "allow_override": [
      false,
      null,
      null
    ],
    "persist": [
      "none",
      null,
      null
    ]
  },
  "ui_settings": {
    "accent_color": [
      "blue",
      null,
      null
    ],
    "density": [
      "comfortable",
      null,
      null
    ],
    "motion": [
      "subtle",
      null,
      null
    ],
    "shape": [
      "rounded",
      null,
      null
    ],
    "surface": [
      "flat",
      null,
      null
    ],
    "theme": [
      "light",
      7,
      12
    ]
  },
  "ui_line": 6,
  "ui_column": 1,
  "capabilities": [],
  "records": [
    {
      "type": "RecordDecl",
      "line": 14,
      "column": 1,
      "name": "Prompt",
      "fields": [
        {
          "type": "FieldDecl",
          "line": 16,
          "column": 5,
          "name": "message",
          "type_name": "text",
          "constraint": {
            "type": "FieldConstraint",
            "line": 16,
            "column": 26,
            "kind": "present",
            "expression": null,
            "expression_high": null,
            "pattern": null
          },
          "type_was_alias": false,
          "raw_type_name": null,
          "type_line": 16,
          "type_column": 16
        }
      ],
      "tenant_key": null,
      "ttl_hours": null
    },
    {
      "type": "RecordDecl",
      "line": 17,
      "column": 1,
      "name": "Answer",
      "fields": [
        {
          "type": "FieldDecl",
          "line": 19,
          "column": 5,
          "name": "prompt",
          "type_name": "text",
          "constraint": {
            "type": "FieldConstraint",
            "line": 19,
            "column": 25,
            "kind": "present",
            "expression": null,
            "expression_high": null,
            "pattern": null
          },
          "type_was_alias": false,
          "raw_type_name": null,
          "type_line": 19,
          "type_column": 15
        },
        {
          "type": "FieldDecl",
          "line": 20,
          "column": 5,
          "name": "reply",
          "type_name": "text",
          "constraint": {
            "type": "FieldConstraint",
            "line": 20,
            "column": 24,
            "kind": "present",
            "expression": null,
            "expression_high": null,
            "pattern": null
          },
          "type_was_alias": false,
          "raw_type_name": null,
          "type_line": 20,
          "type_column": 14
        },
        {
          "type": "FieldDecl",
          "line": 21,
          "column": 5,
          "name": "why",
          "type_name": "text",
          "constraint": {
            "type": "FieldConstraint",
            "line": 21,
            "column": 22,
            "kind": "present",
            "expression": null,
            "expression_high": null,
            "pattern": null
          },
          "type_was_alias": false,
          "raw_type_name": null,
          "type_line": 21,
          "type_column": 12
        }
      ],
      "tenant_key": null,
      "ttl_hours": null
    }
  ],
  "flows": [
    {
      "type": "Flow",
      "line": 22,
      "column": 1,
      "name": "ask_ai",
      "body": [
        {
          "type": "AskAIStmt",
          "line": 23,
          "column": 3,
          "ai_name": "assistant",
          "input_expr": {
            "type": "AttrAccess",
            "line": 23,
            "column": 34,
            "base": "input",
            "attrs": [
              "message"
            ]
          },
          "target": "reply"
        },
        {
          "type": "Set",
          "line": 25,
          "column": 5,
          "target": {
            "type": "StatePath",
            "line": 25,
            "column": 5,
            "path": [
              "prompt",
              "message"
            ]
          },
          "expression": {
            "type": "AttrAccess",
            "line": 25,
            "column": 16,
            "base": "input",
            "attrs": [
              "message"
            ]
          }
        },
        {
          "type": "Create",
          "line": 26,
          "column": 3,
          "record_name": "Prompt",
          "values": {
            "type": "StatePath",
            "line": 26,
            "column": 24,
            "path": [
              "prompt"
            ]
          },
          "target": "prompt"
        },
        {
          "type": "Set",
          "line": 28,
          "column": 5,
          "target": {
            "type": "StatePath",
            "line": 28,
            "column": 5,
            "path": [
              "answer",
              "prompt"
            ]
          },
          "expression": {
            "type": "AttrAccess",
            "line": 28,
            "column": 15,
            "base": "input",
            "attrs": [
              "message"
            ]
          }
        },
        {
          "type": "Set",
          "line": 29,
          "column": 5,
          "target": {
            "type": "StatePath",
            "line": 29,
            "column": 5,
            "path": [
              "answer",
              "reply"
            ]
          },
          "expression": {
            "type": "VarReference",
            "line": 29,
            "column": 14,
            "name": "reply"
          }
        },
        {
          "type": "Set",
          "line": 30,
          "column": 5,
          "target": {
            "type": "StatePath",
            "line": 30,
            "column": 5,
            "path": [
              "answer",
              "why"
            ]
          },
          "expression": {
            "type": "Literal",
            "line": 30,
            "column": 12,
            "value": "ai boundary: provider=DEMO_PROVIDER, model=DEMO_MODEL"
          }
        },
        {
          "type": "Create",
          "line": 31,
          "column": 3,
          "record_name": "Answer",
          "values": {
            "type": "StatePath",
            "line": 31,
            "column": 24,
            "path": [
              "answer"
            ]
          },
          "target": "answer"
        },
        {
          "type": "Return",
          "line": 32,
          "column": 3,
          "expression": {
            "type": "VarReference",
            "line": 32,
            "column": 10,
            "name": "reply"
          }
        }
      ],
      "requires": {
        "type": "Literal",
        "line": 22,
        "column": 25,
        "value": true
      },
      "audited": false
    }
  ],
  "jobs": [],
  "pages": [
    {
      "type": "PageDecl",
      "line": 34,
      "column": 1,
      "name": "home",
      "items": [
        {
          "type": "TitleItem",
          "line": 36,
          "column": 3,
          "value": "{{PROJECT_NAME}}"
        },
        {
          "type": "TextItem",
          "line": 37,
          "column": 3,
          "value": "ask the assistant and see why it answered."
        },
        {
          "type": "ImageItem",
          "line": 38,
          "column": 3,
          "src": "welcome",
          "alt": null,
          "role": "iconic"
        },
        {
          "type": "ChatItem",
          "line": 40,
          "column": 3,
          "children": [
            {
              "type": "ChatComposerItem",
              "line": 41,
              "column": 5,
              "flow_name": "ask_ai"
            }
          ]
        },
        {
          "type": "ComposeItem",
          "line": 42,
          "column": 3,
          "name": "summary",
          "children": [
            {
              "type": "NumberItem",
              "line": 43,
              "column": 5,
              "entries": [
                {
                  "type": "NumberEntry",
                  "line": 44,
                  "column": 7,
                  "kind": "count",
                  "value": null,
                  "record_name": "Answer",
                  "label": "answers"
                }
              ]
            },
            {
              "type": "ViewItem",
              "line": 45,
              "column": 5,
              "record_name": "Answer"
            }
          ]
        },
        {
          "type": "SectionItem",
          "line": 46,
          "column": 3,
          "label": "records",
          "children": [
            {
              "type": "TextItem",
              "line": 47,
              "column": 5,
              "value": "answers include a why field in the table below."
            },
            {
              "type": "CardItem",
              "line": 48,
              "column": 5,
              "label": "prompts",
              "children": [
                {
                  "type": "TableItem",
                  "line": 49,
                  "column": 7,
                  "record_name": "Prompt",
                  "columns": null,
                  "empty_text": null,
                  "sort": null,
                  "pagination": null,
                  "selection": null,
                  "row_actions": null
                }
              ],
              "stat": null,
              "actions": null
            },
            {
              "type": "CardItem",
              "line": 50,
              "column": 5,
              "label": "answers",
              "children": [
                {
                  "type": "TableItem",
                  "line": 51,
                  "column": 7,
                  "record_name": "Answer",
                  "columns": null,
                  "empty_text": null,
                  "sort": null,
                  "pagination": null,
                  "selection": null,
                  "row_actions": null
                }
              ],
              "stat": null,
              "actions": null
            }
          ]
        },
        {
          "type": "StoryItem",
          "line": 52,
          "column": 3,
          "title": "How it works",
          "steps": [
            {
              "type": "StoryStep",
              "line": 53,
              "column": 5,
              "title": "Ask a question",
              "text": "Use the composer to send a prompt.",
              "icon": "info",
              "image": null,
              "image_role": null,
              "tone": null,
              "requires": null,
              "next": "Review the why"
            },
            {
              "type": "StoryStep",
              "line": 57,
              "column": 5,
              "title": "Review the why",
              "text": "Each answer records a reply and why.",
              "icon": null,
              "image": "welcome",
              "image_role": "illustration",
              "tone": null,
              "requires": null,
              "next": null
            }
          ]
        }
      ],
      "requires": null,
      "purpose": "Show the AI boundary and how records capture why."
    }
  ],
  "ais": [
    {
      "type": "AIDecl",
      "line": 9,
      "column": 1,
      "name": "assistant",
      "model": "mock-model",
      "provider": "mock",
      "system_prompt": "DEMO_SYSTEM_PROMPT",
      "exposed_tools": [],
      "memory": {
        "type": "AIMemory",
        "line": 9,
        "column": 1,
        "short_term": 0,
        "semantic": false,
        "profile": false
      }
    }
  ],
  "tools": [],
  "agents": [],
  "ui_packs": [],
  "uses": [],
  "capsule": null,
  "agent_team": null,
  "identity": null
}
