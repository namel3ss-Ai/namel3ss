spec is "1.0"

# template: {{TEMPLATE_NAME}}@{{TEMPLATE_VERSION}}
# Demo app showing the AI boundary with explainable records.

ui:
  theme is "light"

ai "assistant":
  provider is "mock"
  model is "mock-model"
  system_prompt is "DEMO_SYSTEM_PROMPT"

record "Prompt":
  fields:
    message is text must be present
record "Answer":
  fields:
    prompt is text must be present
    reply is text must be present
    why is text must be present
flow "ask_ai": requires true
  ask ai "assistant" with input: input.message as reply
  set state.prompt with:
    message is input.message
  create "Prompt" with state.prompt as prompt
  set state.answer with:
    prompt is input.message
    reply is reply
    why is "ai boundary: provider=DEMO_PROVIDER, model=DEMO_MODEL"
  create "Answer" with state.answer as answer
  return reply

page "home":
  purpose is "Show the AI boundary and how records capture why."
  title is "{{PROJECT_NAME}}"
  text is "ask the assistant and see why it answered."
  image is "welcome":
    role is "iconic"
  chat:
    composer sends to flow "ask_ai"
  compose summary:
    number:
      count of "Answer" as "answers"
    view of "Answer"
  section "records":
    text is "answers include a why field in the table below."
    card "prompts":
      table is "Prompt"
    card "answers":
      table is "Answer"
  story "How it works":
    step "Ask a question":
      text is "Use the composer to send a prompt."
      icon is info
      next is "Review the why"
    step "Review the why":
      text is "Each answer records a reply and why."
      image is "welcome":
        role is "illustration"
