[
  {
    "agent_id": null,
    "events": [
      {
        "action": "phase_start",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          }
        },
        "reason": "allowed",
        "session": "anonymous",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "ai_profile": "assistant",
        "lane": "my",
        "owner": "anonymous",
        "phase_id": "phase-1",
        "policy_snapshot": {
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          }
        },
        "reason": "auto",
        "session": "anonymous",
        "space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_phase_started"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:1",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:1",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:2",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:2",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 1.",
    "output": "ok",
    "step_index": 1,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 2,
        "id": "session:anonymous:my:short_term:1",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 1",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 1."
      },
      {
        "created_at": 3,
        "id": "session:anonymous:my:short_term:2",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:3",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:3",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:4",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:4",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 2.",
    "output": "ok",
    "step_index": 2,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 4,
        "id": "session:anonymous:my:short_term:3",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 2",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 2."
      },
      {
        "created_at": 5,
        "id": "session:anonymous:my:short_term:4",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:5",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:5",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:6",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:6",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 3.",
    "output": "ok",
    "step_index": 3,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 6,
        "id": "session:anonymous:my:short_term:5",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 3",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 3."
      },
      {
        "created_at": 7,
        "id": "session:anonymous:my:short_term:6",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:7",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:7",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:8",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:8",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 4.",
    "output": "ok",
    "step_index": 4,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 8,
        "id": "session:anonymous:my:short_term:7",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 4",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 4."
      },
      {
        "created_at": 9,
        "id": "session:anonymous:my:short_term:8",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:9",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:9",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:10",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:10",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 5.",
    "output": "ok",
    "step_index": 5,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 10,
        "id": "session:anonymous:my:short_term:9",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 5",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 5."
      },
      {
        "created_at": 11,
        "id": "session:anonymous:my:short_term:10",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "ai_profile": "assistant",
        "lane": "my",
        "lines": [
          "Short term memory is near its limit.",
          "Short term items are 10 of 12."
        ],
        "owner": "anonymous",
        "phase_id": "phase-1",
        "session": "anonymous",
        "space": "session",
        "title": "Memory budget",
        "trace_version": "2024-10-01",
        "type": "memory_budget"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:11",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:11",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:12",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:12",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 6.",
    "output": "ok",
    "step_index": 6,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 12,
        "id": "session:anonymous:my:short_term:11",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 6",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 6."
      },
      {
        "created_at": 13,
        "id": "session:anonymous:my:short_term:12",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  },
  {
    "agent_id": null,
    "events": [
      {
        "ai_profile": "assistant",
        "lane": "my",
        "lines": [
          "Short term memory is over its limit.",
          "Short term items are 12 of 12."
        ],
        "owner": "anonymous",
        "phase_id": "phase-1",
        "session": "anonymous",
        "space": "session",
        "title": "Memory budget",
        "trace_version": "2024-10-01",
        "type": "memory_budget"
      },
      {
        "ai_profile": "assistant",
        "lane": "my",
        "memory_id": "session:anonymous:my:short_term:1",
        "owner": "anonymous",
        "phase_id": "phase-1",
        "policy_snapshot": {
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          }
        },
        "reason": "compacted",
        "session": "anonymous",
        "space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_deleted"
      },
      {
        "ai_profile": "assistant",
        "lane": "my",
        "memory_id": "session:anonymous:my:short_term:2",
        "owner": "anonymous",
        "phase_id": "phase-1",
        "policy_snapshot": {
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          }
        },
        "reason": "compacted",
        "session": "anonymous",
        "space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_deleted"
      },
      {
        "ai_profile": "assistant",
        "lane": "my",
        "memory_id": "session:anonymous:my:short_term:3",
        "owner": "anonymous",
        "phase_id": "phase-1",
        "policy_snapshot": {
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          }
        },
        "reason": "compacted",
        "session": "anonymous",
        "space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_deleted"
      },
      {
        "action": "compact",
        "ai_profile": "assistant",
        "items_removed_count": 3,
        "lane": "my",
        "lines": [
          "Action is compact.",
          "Reason is short_term_limit.",
          "Items removed are 3.",
          "Summary was written.",
          "Compaction summary created.",
          "Items compacted are 3.",
          "Item from user is Note 1.",
          "Item from ai is ok.",
          "Item from user is Note 2."
        ],
        "owner": "anonymous",
        "phase_id": "phase-1",
        "reason": "short_term_limit",
        "session": "anonymous",
        "space": "session",
        "summary_written": true,
        "title": "Memory compaction",
        "trace_version": "2024-10-01",
        "type": "memory_compaction"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:14",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:14",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:15",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      },
      {
        "action": "lane_write",
        "ai_profile": "assistant",
        "allowed": true,
        "from_lane": "my",
        "from_space": "session",
        "policy_snapshot": {
          "allow_event_types": [],
          "authority_order": [
            "system_imposed",
            "tool_verified",
            "user_asserted",
            "ai_inferred"
          ],
          "deny_event_types": [],
          "lanes": {
            "agent_enabled": true,
            "read_order": [
              "my",
              "agent",
              "team",
              "system"
            ],
            "system_enabled": true,
            "team_can_change": true,
            "team_enabled": true,
            "team_event_types": [
              "decision",
              "rule",
              "execution"
            ],
            "write_lanes": [
              "my",
              "agent"
            ]
          },
          "phase": {
            "allow_cross_phase_recall": false,
            "diff_enabled": true,
            "enabled": true,
            "max_phases": null,
            "mode": "current_only"
          },
          "privacy": {
            "allow_profile_keys": [
              "name",
              "timezone",
              "language",
              "project",
              "editor",
              "units"
            ],
            "deny_patterns": [
              "password",
              "secret",
              "token",
              "api key",
              "apikey",
              "credit card",
              "ssn",
              "social security",
              "private key"
            ],
            "deny_sensitive": true
          },
          "promotion": {
            "profile": {
              "allowed_event_types": [
                "fact",
                "correction"
              ]
            },
            "semantic": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            },
            "short_term": {
              "allowed_event_types": [
                "context",
                "correction",
                "decision",
                "execution",
                "fact",
                "preference",
                "rule"
              ]
            }
          },
          "retention": {
            "profile": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            },
            "semantic": {
              "context": {
                "mode": "decay",
                "ttl_ticks": 12
              },
              "correction": {
                "mode": "decay",
                "ttl_ticks": 45
              },
              "decision": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "execution": {
                "mode": "decay",
                "ttl_ticks": 18
              },
              "fact": {
                "mode": "decay",
                "ttl_ticks": 60
              },
              "preference": {
                "mode": "decay",
                "ttl_ticks": 40
              },
              "rule": {
                "mode": "decay",
                "ttl_ticks": 40
              }
            },
            "short_term": {
              "context": {
                "mode": "never",
                "ttl_ticks": null
              },
              "correction": {
                "mode": "never",
                "ttl_ticks": null
              },
              "decision": {
                "mode": "never",
                "ttl_ticks": null
              },
              "execution": {
                "mode": "never",
                "ttl_ticks": null
              },
              "fact": {
                "mode": "never",
                "ttl_ticks": null
              },
              "preference": {
                "mode": "never",
                "ttl_ticks": null
              },
              "rule": {
                "mode": "never",
                "ttl_ticks": null
              }
            }
          },
          "spaces": {
            "promotions": [
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "session",
                "min_authority": "user_asserted",
                "to_space": "user"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": true,
                "from_space": "session",
                "min_authority": "tool_verified",
                "to_space": "project"
              },
              {
                "allowed_event_types": [
                  "preference",
                  "decision",
                  "fact",
                  "correction"
                ],
                "decision_override": false,
                "from_space": "user",
                "min_authority": "user_asserted",
                "to_space": "project"
              }
            ],
            "read_order": [
              "session",
              "user",
              "project",
              "system"
            ],
            "write_spaces": [
              "session"
            ]
          },
          "trust": {
            "approval_count_required": 1,
            "owner_override": true,
            "who_can_approve": "approver",
            "who_can_propose": "contributor",
            "who_can_reject": "approver"
          },
          "write_policy": "normal"
        },
        "reason": "allowed",
        "session": "anonymous",
        "subject_id": "session:anonymous:my:short_term:15",
        "to_lane": "my",
        "to_space": "session",
        "trace_version": "2024-10-01",
        "type": "memory_border_check"
      }
    ],
    "input": "Note 7.",
    "output": "ok",
    "step_index": 7,
    "step_kind": "record",
    "tool_events": [],
    "written": [
      {
        "created_at": 14,
        "id": "session:anonymous:my:short_term:13",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "system_imposed",
          "authority_reason": "source:system",
          "can_change": true,
          "compaction_ledger": [
            {
              "kind": "short_term",
              "lane": "my",
              "link_preview_text": {},
              "links": [],
              "memory_id": "session:anonymous:my:short_term:1",
              "owner": "anonymous",
              "phase_id": "phase-1",
              "preview": "Note 1.",
              "space": "session"
            },
            {
              "kind": "short_term",
              "lane": "my",
              "link_preview_text": {},
              "links": [],
              "memory_id": "session:anonymous:my:short_term:2",
              "owner": "anonymous",
              "phase_id": "phase-1",
              "preview": "ok",
              "space": "session"
            },
            {
              "kind": "short_term",
              "lane": "my",
              "link_preview_text": {},
              "links": [],
              "memory_id": "session:anonymous:my:short_term:3",
              "owner": "anonymous",
              "phase_id": "phase-1",
              "preview": "Note 2.",
              "space": "session"
            }
          ],
          "compaction_reason_codes": [
            "context",
            "low_importance",
            "no_links",
            "old_turn"
          ],
          "dedup_key": "context:user note 1 ai ok user note 2",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "compaction"
          ],
          "lane": "my",
          "link_preview_text": {
            "session:anonymous:my:short_term:1": "Note 1.",
            "session:anonymous:my:short_term:2": "ok",
            "session:anonymous:my:short_term:3": "Note 2."
          },
          "links": [
            {
              "created_in_phase_id": "phase-1",
              "reason_code": "compacted",
              "to_id": "session:anonymous:my:short_term:1",
              "type": "replaced"
            },
            {
              "created_in_phase_id": "phase-1",
              "reason_code": "compacted",
              "to_id": "session:anonymous:my:short_term:2",
              "type": "replaced"
            },
            {
              "created_in_phase_id": "phase-1",
              "reason_code": "compacted",
              "to_id": "session:anonymous:my:short_term:3",
              "type": "replaced"
            }
          ],
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "space": "session",
          "summary_of": [
            "session:anonymous:my:short_term:1",
            "session:anonymous:my:short_term:2",
            "session:anonymous:my:short_term:3"
          ],
          "visible_to": "me"
        },
        "scope": "session",
        "source": "system",
        "text": "user: Note 1. | ai: ok | user: Note 2."
      },
      {
        "created_at": 15,
        "id": "session:anonymous:my:short_term:14",
        "importance": 2,
        "kind": "short_term",
        "meta": {
          "authority": "user_asserted",
          "authority_reason": "source:user",
          "can_change": true,
          "dedup_key": "context:note 7",
          "event_type": "context",
          "importance_reason": [
            "event:context",
            "source:user"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "user",
        "text": "Note 7."
      },
      {
        "created_at": 16,
        "id": "session:anonymous:my:short_term:15",
        "importance": 1,
        "kind": "short_term",
        "meta": {
          "authority": "ai_inferred",
          "authority_reason": "source:ai",
          "can_change": true,
          "dedup_key": "context:ok",
          "event_type": "context",
          "importance_reason": [
            "event:context"
          ],
          "lane": "my",
          "owner": "anonymous",
          "phase_id": "phase-1",
          "phase_reason": "auto",
          "phase_started_at": 1,
          "policy_tags": [
            "allowed_by:privacy",
            "allowed_by:promotion_rule"
          ],
          "space": "session",
          "visible_to": "me"
        },
        "scope": "session",
        "source": "ai",
        "text": "ok"
      }
    ]
  }
]
