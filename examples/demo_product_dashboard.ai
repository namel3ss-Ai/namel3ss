spec is "1.0"

record "Order":
  fields:
    id is number must be present
    customer is text must be present
    total is number must be present
    status is text must be present

flow "seed_orders":
  set state.order with:
    id is 101
    customer is "Acme Corp"
    total is 240
    status is "processing"
  create "Order" with state.order as order
  set state.order with:
    id is 102
    customer is "Bright Traders"
    total is 120
    status is "shipped"
  create "Order" with state.order as order
  set state.order with:
    id is 103
    customer is "Northwind"
    total is 86
    status is "processing"
  create "Order" with state.order as order
  return "seeded"

flow "clear_orders":
  set state.cleared is true
  return "cleared"

flow "refresh_orders":
  return "ok"

flow "parallel_demo":
  parallel:
    run "alpha":
      let alpha_total is 10 + 5
      return alpha_total
    run "beta":
      let beta_total is 8 * 2
      return beta_total

page "home":
  title is "Product dashboard"
  section "Overview":
    row:
      column:
        card "Orders":
          text is "Track and seed demo orders."
          button "Seed data":
            calls flow "seed_orders"
      column:
        card "Status":
          text is "Clear demo state."
          button "Clear":
            calls flow "clear_orders"
    row:
      column:
        card "Parallel demo":
          text is "Parallel demo runs tasks in name order."
          button "Run parallel demo":
            calls flow "parallel_demo"
  divider
  section "Orders":
    row:
      column:
        card "Recent orders":
          table is "Order"
      column:
        image is "https://dummyimage.com/600x360/efefef/000&text=Dashboard"
  text is "All orders table"
  table is "Order"
