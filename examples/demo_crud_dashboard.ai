record "Customer":
  field "name" is text must be present
  field "email" is text must match pattern ".+@.+"
  field "plan" is text must be present
  field "age" is number must be greater than 17

flow "seed_customers":
  set state.customer.name is "Ada Lovelace"
  set state.customer.email is "ada@example.com"
  set state.customer.plan is "Pro"
  set state.customer.age is 28
  create "Customer" with state.customer as customer
  set state.customer.name is "Ben Lee"
  set state.customer.email is "ben@example.com"
  set state.customer.plan is "Starter"
  set state.customer.age is 24
  create "Customer" with state.customer as customer
  return "Seeded demo customers"

flow "reset_dashboard":
  set state.customer is null
  return "State cleared (records remain for review)."

page "home":
  title is "Customer Dashboard"
  text is "Add customers and view them below."
  section "Quick actions":
    row:
      column:
        button "Seed demo data":
          calls flow "seed_customers"
      column:
        button "Reset state":
          calls flow "reset_dashboard"
  row:
    column:
      card "Add customer":
        form is "Customer"
    column:
      card "Customer list":
        table is "Customer"
