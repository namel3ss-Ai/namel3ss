spec is "1.0"

record "Customer":
  fields:
    name is text must be present
    email is text must match pattern ".+@.+"
    plan is text must be present
    age is number must be greater than 17

flow "seed_customers":
  set state.customer with:
    name is "Ada Lovelace"
    email is "ada@example.com"
    plan is "Pro"
    age is 28
  create "Customer" with state.customer as customer
  set state.customer with:
    name is "Ben Lee"
    email is "ben@example.com"
    plan is "Starter"
    age is 24
  create "Customer" with state.customer as customer
  return "Seeded demo customers"

flow "reset_dashboard":
  set state.customer is null
  return "State cleared (records remain for review)."

page "home":
  title is "Customer Dashboard"
  text is "Add customers and view them below."
  section "Quick actions":
    row:
      column:
        button "Seed demo data":
          calls flow "seed_customers"
      column:
        button "Reset state":
          calls flow "reset_dashboard"
  row:
    column:
      card "Add customer":
        form is "Customer"
    column:
      card "Customer list":
        table is "Customer"
