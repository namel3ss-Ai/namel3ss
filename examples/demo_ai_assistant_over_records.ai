tool "echo":
  implemented using builtin

  input:
    value is json

  output:
    echo is json

record "Note":
  field "heading" is text must be present
  field "content" is text must have length at least 5

ai "assistant":
  provider is "mock"
  model is "mock-model"
  system_prompt is "You are a concise assistant that summarizes notes."
  tools:
    expose "echo"
  memory:
    short_term is 5
    semantic is true
    profile is true

flow "seed_notes":
  set state.note.heading is "Release plan"
  set state.note.content is "Ship in weekly iterations with clear changelog."
  create "Note" with state.note as note
  return "seeded notes"

flow "ask_assistant":
  let prompt is "Summarize the notes shown in the table for a team update."
  ask ai "assistant" with input: prompt as reply
  set state.reply is reply
  return reply

page "notes":
  title is "Notes Assistant"
  text is "Save notes and ask the assistant for help."
  section "Notes":
    card "Manage notes":
      form is "Note"
      button "Seed example note":
        calls flow "seed_notes"
    card "Saved notes":
      table is "Note"
  card "Assistant":
    button "Ask assistant":
      calls flow "ask_assistant"
